<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Configuration · Revise.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>Revise.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../">Home</a></li><li class="current"><a class="toctext" href>Configuration</a><ul class="internal"><li><a class="toctext" href="#Using-Revise-by-default-1">Using Revise by default</a></li><li><a class="toctext" href="#System-configuration-1">System configuration</a></li><li><a class="toctext" href="#Configuration-options-1">Configuration options</a></li><li><a class="toctext" href="#Fixing-a-broken-or-partially-working-installation-1">Fixing a broken or partially-working installation</a></li></ul></li><li><a class="toctext" href="../limitations/">Limitations</a></li><li><a class="toctext" href="../debugging/">Debugging Revise</a></li><li><a class="toctext" href="../internals/">How Revise works</a></li><li><a class="toctext" href="../user_reference/">User reference</a></li><li><a class="toctext" href="../dev_reference/">Developer reference</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href>Configuration</a></li></ul><a class="edit-page" href="https://github.com/timholy/Revise.jl/blob/master/docs/src/config.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Configuration</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Configuration-1" href="#Configuration-1">Configuration</a></h1><h2><a class="nav-anchor" id="Using-Revise-by-default-1" href="#Using-Revise-by-default-1">Using Revise by default</a></h2><p>If you like Revise, you can ensure that every Julia session uses it by adding the following to your <code>.julia/config/startup.jl</code> file:</p><pre><code class="language-julia">atreplinit() do repl
    try
        @eval using Revise
        @async Revise.wait_steal_repl_backend()
    catch
    end
end</code></pre><p>If you want Revise to launch automatically within IJulia, then you should also create a <code>.julia/config/startup_ijulia.jl</code> file with the contents</p><pre><code class="language-julia">try
    @eval using Revise
catch
end</code></pre><h2><a class="nav-anchor" id="System-configuration-1" href="#System-configuration-1">System configuration</a></h2><div class="admonition note"><div class="admonition-title">Linux-specific configuration</div><div class="admonition-text"><p>Revise needs to be notified by your filesystem about changes to your code, which means that the files that define your modules need to be watched for updates. Some systems impose limits on the number of files and directories that can be watched simultaneously; if this limit is hit, on Linux this can result in a fairly cryptic error like</p><pre><code class="language-sh">ERROR: start_watching (File Monitor): no space left on device (ENOSPC)</code></pre><p>The cure is to increase the number of files that can be watched, by executing</p><pre><code class="language-sh">echo 65536 | sudo tee -a /proc/sys/fs/inotify/max_user_watches</code></pre><p>at the Linux prompt. (The maximum value is 524288, which will allocate half a gigabyte of RAM to file-watching). For more information see <a href="https://github.com/timholy/Revise.jl/issues/26">issue #26</a>.</p><p>Changing the value this way may not last through the next reboot, but <a href="https://askubuntu.com/questions/716431/inotify-max-user-watches-value-resets-on-reboot-how-to-change-it-permanently">you can also change it permanently</a>.</p></div></div><h2><a class="nav-anchor" id="Configuration-options-1" href="#Configuration-options-1">Configuration options</a></h2><p>Revise can be configured by setting environment variables. These variables have to be set before you execute <code>using Revise</code>, because these environment variables are parsed only during execution of Revise&#39;s <code>__init__</code> function.</p><p>There are several ways to set these environment variables:</p><ul><li>If you are <a href="#Using-Revise-by-default-1">Using Revise by default</a> then you can include statements like <code>ENV[&quot;JULIA_REVISE&quot;] = &quot;manual&quot;</code> in your <code>.julia/config/startup.jl</code> file prior to the line <code>@eval using Revise</code>.</li><li>On Unix systems, you can set variables in your shell initialization script (e.g., put lines like <code>export JULIA_REVISE=manual</code> in your <a href="http://www.linuxfromscratch.org/blfs/view/svn/postlfs/profile.html"><code>.bashrc</code> file</a> if you use <code>bash</code>).</li><li>On Unix systems, you can launch Julia from the Unix prompt as <code>$ JULIA_REVISE=manual julia</code> to set options for just that session.</li></ul><p>The function of specific environment variables is described below.</p><h3><a class="nav-anchor" id="Manual-revision:-JULIA_REVISE-1" href="#Manual-revision:-JULIA_REVISE-1">Manual revision: JULIA_REVISE</a></h3><p>By default, Revise processes any modified source files every time you enter a command at the REPL. However, there might be times where you&#39;d prefer to exert manual control over the timing of revisions. <code>Revise</code> looks for an environment variable <code>JULIA_REVISE</code>, and if it is set to anything other than <code>&quot;auto&quot;</code> it will require that you manually call <code>revise()</code> to update code.</p><p>Alternatively, you can omit the call to <code>Revise.async_steal_repl_backend()</code> from your <code>startup.jl</code> file (see <a href="#Using-Revise-by-default-1">Using Revise by default</a>).</p><h3><a class="nav-anchor" id="Polling-and-NFS-mounted-code-directories:-JULIA_REVISE_POLL-1" href="#Polling-and-NFS-mounted-code-directories:-JULIA_REVISE_POLL-1">Polling and NFS-mounted code directories: JULIA_REVISE_POLL</a></h3><p><code>Revise</code> works by scanning your filesystem for changes to the files that define your code. Different operating systems and file systems <a href="https://nodejs.org/api/fs.html#fs_caveats">offer differing levels of support</a> for this feature. Because <a href="https://stackoverflow.com/questions/4231243/inotify-with-nfs">NFS doesn&#39;t support <code>inotify</code></a>, if your code is stored on an NFS-mounted volume you should force Revise to use polling: Revise will periodically (every 5s) scan the modification times of each dependent file. You turn on polling by setting the environment variable <code>JULIA_REVISE_POLL</code> to the string <code>&quot;1&quot;</code> (e.g., <code>JULIA_REVISE_POLL=1</code> in a bash script).</p><p>If you&#39;re using polling, you may have to wait several seconds before changes take effect. Consequently polling is not recommended unless you have no other alternative.</p><h3><a class="nav-anchor" id="User-scripts:-JULIA_REVISE_INCLUDE-1" href="#User-scripts:-JULIA_REVISE_INCLUDE-1">User scripts: JULIA_REVISE_INCLUDE</a></h3><p>By default, <code>Revise</code> only tracks files that have been required as a consequence of a <code>using</code> or <code>import</code> statement; files loaded by <code>include</code> are not tracked, unless you explicitly use <code>Revise.track(filename)</code>. However, you can turn on automatic tracking by setting the environment variable <code>JULIA_REVISE_INCLUDE</code> to the string <code>&quot;1&quot;</code> (e.g., <code>JULIA_REVISE_INCLUDE=1</code> in a bash script).</p><h2><a class="nav-anchor" id="Fixing-a-broken-or-partially-working-installation-1" href="#Fixing-a-broken-or-partially-working-installation-1">Fixing a broken or partially-working installation</a></h2><p>During certain types of usage you might receive messages like</p><pre><code class="language-julia">Warning: /some/system/path/stdlib/v1.0/SHA/src is not an existing directory, Revise is not watching</code></pre><p>and this indicates that some of Revise&#39;s functionality is broken.</p><p>Revise&#39;s test suite covers a broad swath of functionality, and so if something is broken a good first start towards resolving the problem is to run <code>pkg&gt; test Revise</code>. Note that some test failures may not really matter to you personally: if, for example, you don&#39;t plan on hacking on Julia&#39;s compiler then you may not be concerned about failures related to <code>Revise.track(Core.Compiler)</code>. However, because Revise is used by <a href="https://github.com/timholy/Rebugger.jl">Rebugger</a> and it is common to step into <code>Base</code> methods while debugging, there may be more cases than you might otherwise expect in which you might wish for Revise&#39;s more &quot;advanced&quot; functionality.</p><p>In the majority of cases, failures come down to Revise having trouble locating source code on your drive. This problem should be fixable, because Revise includes functionality to update its links to source files, as long as it knows what to do.</p><p>Here are some possible test warnings and errors, and steps you might take to fix them:</p><ul><li><code>Error: Package Example not found in current path</code>: This (tiny) package is only used for testing purposes, and gets installed automatically if you do <code>pkg&gt; test Revise</code>, but not if you <code>include(&quot;runtests.jl&quot;)</code> from inside Revise&#39;s <code>test/</code> directory. You can prevent the error with <code>pkg&gt; add Example</code>.</li><li><code>Base &amp; stdlib file paths: Test Failed at /some/path...  Expression: isfile(Revise.basesrccache)</code> This failure is quite serious, and indicates that you will be unable to access code in <code>Base</code>. To fix this, look for a file called <code>&quot;base.cache&quot;</code> somewhere in your Julia install or build directory (for the author, it is at <code>/home/tim/src/julia-1.0/usr/share/julia/base.cache</code>). Now compare this with the value of <code>Revise.basesrccache</code>. (If you&#39;re getting this failure, presumably they are different.) An important &quot;top level&quot; directory is <code>Sys.BINDIR</code>; if they differ already at this level, consider adding a symbolic link from the location pointed at by <code>Sys.BINDIR</code> to the corresponding top-level directory in your actual Julia installation. You&#39;ll know you&#39;ve succeeded in specifying it correctly when, after restarting Julia, <code>Revise.basesrccache</code> points to the correct file and <code>Revise.juliadir</code> points to the directory that contains <code>base/</code>. If this workaround is not possible or does not succeed, please <a href="https://github.com/timholy/Revise.jl/issues">file an issue</a> with a description of why you can&#39;t use it and/or<ul><li>details from <code>versioninfo</code> and information about how you obtained your Julia installation;</li><li>the values of <code>Revise.basesrccache</code> and <code>Revise.juliadir</code>, and the actual paths to <code>base.cache</code> and the directory containing the running Julia&#39;s <code>base/</code>;</li><li>what you attempted when trying to fix the problem;</li><li>if possible, your best understanding of why this failed to fix it.</li></ul></li><li><code>skipping Core.Compiler and stdlibs tests due to lack of git repo</code>: this likely indicates that you downloaded a Julia binary rather than building Julia from source. While Revise should be able to access the code in <code>Base</code>, at the current time it is not possible for Revise to access julia&#39;s stdlibs unless you clone Julia&#39;s repository and build it from source.</li><li><code>skipping git tests because Revise is not under development</code>: this warning should be harmless. Revise has built-in functionality for extracting source code using <code>git</code>, and it uses itself (i.e., its own git repository) for testing purposes. These tests run only if you have checked out Revise for development (<code>pkg&gt; dev Revise</code>) or on the continuous integration servers (Travis and Appveyor).</li></ul><footer><hr/><a class="previous" href="../"><span class="direction">Previous</span><span class="title">Home</span></a><a class="next" href="../limitations/"><span class="direction">Next</span><span class="title">Limitations</span></a></footer></article></body></html>
